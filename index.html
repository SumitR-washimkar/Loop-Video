<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Loop Video Folder Player</title>
    <style>
        * {
            box-sizing: border-box;
        }

        body {
            margin: 0;
            font-family: Arial, sans-serif;
            background: #0f0f0f;
            color: #fff;
        }

        header {
            padding: 15px;
            text-align: center;
            background: #181818;
            font-size: 20px;
            font-weight: bold;
        }

        .container {
            display: flex;
            height: calc(100vh - 60px);
        }

        .sidebar {
            width: 300px;
            background: #141414;
            border-right: 1px solid #222;
            display: flex;
            flex-direction: column;
        }

        .sidebar input {
            margin: 15px;
        }

        .playlist {
            flex: 1;
            overflow-y: auto;
        }

        .playlist-item {
            padding: 12px 15px;
            cursor: pointer;
            border-bottom: 1px solid #222;
            font-size: 14px;
        }

        .playlist-item:hover {
            background: #222;
        }

        .playlist-item.active {
            background: #ff9800;
            color: #000;
            font-weight: bold;
        }

        .player-area {
            flex: 1;
            display: flex;
            justify-content: center;
            align-items: center;
            background: black;
        }

        video {
            max-width: 100%;
            max-height: 100%;
        }
    </style>
</head>
<body>

<header>Loop Video Folder Player</header>

<div class="container">

    <!-- Sidebar -->
    <div class="sidebar">
        <input type="file" id="folderInput" webkitdirectory multiple accept="video/*">

        <div class="playlist" id="playlist">
            <div style="padding:15px; color:#888;">
                Select a folder to load videos
            </div>
        </div>
    </div>

    <!-- Video Player -->
    <div class="player-area">
        <video id="videoPlayer" controls autoplay></video>
    </div>

</div>

<script>
    const folderInput = document.getElementById("folderInput");
    const videoPlayer = document.getElementById("videoPlayer");
    const playlistEl = document.getElementById("playlist");

    let videos = [];
    let currentIndex = 0;

    folderInput.addEventListener("change", () => {
        videos = Array.from(folderInput.files)
            .filter(file => file.type.startsWith("video/"))
            .sort((a, b) => a.name.localeCompare(b.name));

        if (videos.length === 0) {
            playlistEl.innerHTML = "<div style='padding:15px;'>No videos found</div>";
            return;
        }

        renderPlaylist();
        playVideo(0);
    });

    function renderPlaylist() {
        playlistEl.innerHTML = "";
        videos.forEach((video, index) => {
            const item = document.createElement("div");
            item.className = "playlist-item";
            item.textContent = video.name;

            item.onclick = () => {
                playVideo(index);
            };

            playlistEl.appendChild(item);
        });
    }

    function playVideo(index) {
        currentIndex = index;

        const file = videos[index];
        videoPlayer.src = URL.createObjectURL(file);
        videoPlayer.play();

        updateActiveItem();
    }

    function updateActiveItem() {
        document.querySelectorAll(".playlist-item").forEach((item, i) => {
            item.classList.toggle("active", i === currentIndex);
        });
    }

    videoPlayer.addEventListener("ended", () => {
        currentIndex = (currentIndex + 1) % videos.length;
        playVideo(currentIndex);
    });
</script>

</body>
</html>
